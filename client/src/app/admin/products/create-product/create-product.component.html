<mat-card>
  <mat-card-header>
    <mat-card-title>Create a new Product</mat-card-title>
  </mat-card-header>
  <mat-card-content>
    <div class="image-container">
      <img
        [src]="imagePreview">
      <button mat-raised-button for="file" (click)="uploadHandler(inputRef)" type="button">Upload image
        <mat-icon>upload</mat-icon>
      </button>
      <mat-error *ngIf="form.controls['image'].errors?.['required'] && form.controls['image'].touched">
        Image is required
      </mat-error>
      <mat-error *ngIf="form.controls['image'].errors?.['type'] && !form.controls['image'].errors?.['required']">
        The file must be of type image
      </mat-error>
    </div>
    <div class="form-container">
      <form [formGroup]="form" (ngSubmit)="submitHandler()">
        <input #inputRef type="file" id="file" (change)="uploadFile($event)"/>
        <mat-form-field class="form-control" appearance="outline">
          <mat-label>Pizza name</mat-label>
          <input color="primary" type="text" matInput formControlName="name" placeholder="Chicago Pizza">
          <mat-error *ngIf="form.controls['name'].hasError('minlength') && !form.controls['name'].hasError('required')">
            Pizza Name should be at least 3 characters long
          </mat-error>
          <mat-error *ngIf="form.controls['name'].hasError('required')">
            Pizza Name is required
          </mat-error>
        </mat-form-field>
        <mat-form-field class="form-control" appearance="outline">
          <mat-label>Pizza Description</mat-label>
          <textarea rows="5" color="primary" type="text" matInput formControlName="description" placeholder="Enjoy the highest calorie delicious traditional Italian pizza..."> </textarea>
          <mat-error *ngIf="form.controls['description'].hasError('minlength') && !form.controls['description'].hasError('required')">
            Pizza description should be at least 10 characters long
          </mat-error>
          <mat-error *ngIf="form.controls['description'].hasError('required')">
            Pizza description is required
          </mat-error>
        </mat-form-field>

        <mat-accordion class="example-headers-align" multi>
          <app-expansion-panel
          title="Pizza Sizes"
          description="Please add types of pizza sizes. You must fulfill all fields - size name,pieces and price"
          iconName="local_pizza"
          formArrayName="sizes"
          >
          </app-expansion-panel>

          <app-expansion-panel
          title="Pizza Dough"
          description="Please add types of pizza dough.You must fulfill all fields - dough name and additional price"
          iconName="circle"
          formArrayName="doughs"
          >
          </app-expansion-panel>

          <app-expansion-panel
          title="Pizza Ingredients"
          description="Please add pizza's Ingredients"
          iconName="local_pizza"
          formArrayName="ingredients"
          >
          </app-expansion-panel>

          <app-expansion-panel
          title="Pizza Extras"
          description="Please add extras.You must fulfill all fields - extra name and price"
          iconName="settings_suggest"
          formArrayName="extras"
          >
          </app-expansion-panel>

        </mat-accordion>
        <mat-card-actions>
          <button mat-raised-button color="primary">Submit</button>
        </mat-card-actions>
      </form>
    </div>

  </mat-card-content>
</mat-card>