<div class="rate-product-container">
  <div class="header">
    <h2 mat-dialog-title>Rate this product</h2>
    <button mat-icon-button mat-dialog-close>
      <mat-icon>close</mat-icon>
    </button>
  </div>
  <mat-divider></mat-divider>
  <mat-dialog-content class="mat-typography" *ngIf="currentProduct$|async as currentProduct">
    <app-loading-spinner *ngIf="isLoading$ | async"></app-loading-spinner>
      <header>
        <div class="image-container">
          <img [src]="currentProduct?.imageUrl" [alt]="currentProduct?.name">
          <mat-card-subtitle>{{currentProduct?.name}}</mat-card-subtitle>
        </div>
        <app-rating-diagram [rates]="currentProduct?.rates || []"></app-rating-diagram>
      </header>
      <mat-divider></mat-divider>

      <form [formGroup]="form">
        <div class="rate">
          <h2>Your rating</h2>
          <app-rate></app-rate>
        </div>
        <h2>Write a review</h2>
        <app-review-form></app-review-form>
      </form>
  </mat-dialog-content>

  <mat-dialog-actions align="end">
    <button mat-raised-button mat-dialog-close color="warn">Cancel</button>
    <button mat-raised-button color="primary" (click)="onRateProduct()" [disabled]="form.invalid">Rate</button>
  </mat-dialog-actions>
</div>